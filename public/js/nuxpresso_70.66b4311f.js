(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["nuxpresso_70","nuxpresso_62"],{"1e25":function(t,e,r){"use strict";var i=r("23e7"),n=r("58a8").end,s=r("c8d2"),o=s("trimEnd"),a=o?function(){return n(this)}:"".trimEnd;i({target:"String",proto:!0,forced:o},{trimEnd:a,trimRight:a})},"4d63":function(t,e,r){var i=r("83ab"),n=r("da84"),s=r("94ca"),o=r("7156"),a=r("9bf2").f,l=r("241c").f,c=r("44e7"),p=r("ad6d"),u=r("9f7f"),d=r("6eeb"),f=r("d039"),g=r("69f3").enforce,m=r("2626"),h=r("b622"),v=h("match"),y=n.RegExp,x=y.prototype,_=/a/g,b=/a/g,E=new y(_)!==_,w=u.UNSUPPORTED_Y,k=i&&s("RegExp",!E||w||f((function(){return b[v]=!1,y(_)!=_||y(b)==b||"/a/i"!=y(_,"i")})));if(k){var C=function(t,e){var r,i=this instanceof C,n=c(t),s=void 0===e;if(!i&&n&&t.constructor===C&&s)return t;E?n&&!s&&(t=t.source):t instanceof C&&(s&&(e=p.call(t)),t=t.source),w&&(r=!!e&&e.indexOf("y")>-1,r&&(e=e.replace(/y/g,"")));var a=o(E?new y(t,e):y(t,e),i?this:x,C);if(w&&r){var l=g(a);l.sticky=!0}return a},R=function(t){t in C||a(C,t,{configurable:!0,get:function(){return y[t]},set:function(e){y[t]=e}})},O=l(y),j=0;while(O.length>j)R(O[j++]);x.constructor=C,C.prototype=x,d(n,"RegExp",C)}m("RegExp")},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,r){var i=r("1d80"),n=r("5899"),s="["+n+"]",o=RegExp("^"+s+s+"*"),a=RegExp(s+s+"*$"),l=function(t){return function(e){var r=String(i(e));return 1&t&&(r=r.replace(o,"")),2&t&&(r=r.replace(a,"")),r}};t.exports={start:l(1),end:l(2),trim:l(3)}},a0aa:function(t,e,r){"use strict";r.r(e);var i={_id:{type:"id",edit:!1,list:!1},name:{type:"string",edit:!0,list:!0},slug:{type:"string",edit:!0,list:!1},description:{type:"text",edit:!0,list:!1},assets:{type:"image_uri",edit:!0,list:!0},category:{type:"select",edit:!0,list:!0},facets:{type:"select",separator:"|",edit:!0,list:!0},optionGroups:{type:"array",edit:!1,list:!1},optionValues:{type:"list",separator:"|",edit:!1,list:!1},sku:{type:"string",list:!0,edit:!1},parent:{type:"string",list:!1,edit:!1},price:{type:"currency",edit:!1,list:!0},taxCategory:{type:"string",edit:!0,list:!1},stockOnHand:{type:"number",edit:!1,list:!1},trackInventory:{type:"boolean",edit:!1,list:!1},variantAssets:{type:"array",edit:!1,list:!1},type:{type:"array",edit:!1,list:!1},image:{type:"image",edit:!1,list:!1}};e["default"]=i},c8d2:function(t,e,r){var i=r("d039"),n=r("5899"),s="​᠎";t.exports=function(t){return i((function(){return!!n[t]()||s[t]()!=s||n[t].name!==t}))}},d262:function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"flex flex-col p-4 bg-white text-black"},[t.schema&&t.importFields?r("div",[r("div",{staticClass:"flex flex-col p-2"},[r("p",[t._v("You are importing "+t._s(t.json.length)+" products "),r("br")]),t.importing?t._e():r("button",{staticClass:"warning",on:{click:t.importProducts}},[t._v("Import Products")]),t.importOK?r("div",[t._v(" Imported: "+t._s(t.importOK.length)+" Errors: "+t._s(t.importError.length)+" "),t._l(t.importError,(function(e){return r("div",{staticClass:"flex flex-col"},[r("div",[t._v(t._s(e))])])}))],2):t._e()])]):t._e(),r("div",{staticClass:"flex text-white relative text-center p-2"},[r("input",{staticClass:"absolute top-0 left-0 right-0 bottom-0 ",attrs:{type:"file"},on:{change:t.loadTextFromFile}}),r("button",{staticClass:"w-full warning"},[t._v("Select File")])])])},n=[],s=(r("b64b"),r("d81d"),r("b0c0"),r("1e25"),r("4d63"),r("ac1f"),r("25f0"),r("5319"),r("a0aa")),o=(r("52cd"),{name:"MokaProductsImport",data:function(){return{files:[],json:null,loaded:!1,loadedComponent:"",blockIndex:null,schema:null,toImport:null,importFields:null,mapping:{},importOK:[],importError:[]}},watch:{json:function(t){t.length&&(this.importFields=Object.keys(t[0]))}},mounted:function(){this.schema=s["default"]},methods:{setImport:function(t,e){this.mapping[t]=e},loadTextFromFile:function(t){var e=this;this.importing=!1;var r=t.target.files[0],i=new FileReader,n=this;i.onload=function(t){e.json=n.csv_to_json(t.target.result)},i.readAsText(r)},importProducts:function(){var t=this;this.importing=!0,this.importOK=[],this.importError=[],this.json.map((function(e){e.name?e.type="product":e.type="variation",e.assets&&(e.assets="/uploads/"+e.assets),t.$api.service("products").create(e).then((function(r){t.importOK.push(e.sku)})).catch((function(e){t.importError.push(produc.sku)}))}))},csv_to_json:function(t){for(var e=this.CSVToArray(t),r=[],i=1;i<e.length;i++){r[i-1]={};for(var n=0;n<e[0].length&&n<e[i].length;n++){var s=e[0][n].trimEnd();r[i-1][s]=e[i][n].trimEnd().replaceAll("category:","")}}return console.log(r),r},CSVToArray:function(t,e){e=e||",";var r=new RegExp("(\\"+e+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+e+"\\r\\n]*))","gi"),i=[[]],n=null;while(n=r.exec(t)){var s=n[1];if(s.length&&s!=e&&i.push([]),n[2])s=n[2].replace(new RegExp('""',"g"),'"');else s=n[3];i[i.length-1].push(s)}return i}}}),a=o,l=r("2877"),c=Object(l["a"])(a,i,n,!1,null,null,null);e["default"]=c.exports}}]);