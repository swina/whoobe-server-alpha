(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-734d50f8","chunk-2d22a11a"],{a468:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"m-4 p-4 bg-white"},[e._m(0),o("div",{staticClass:"grid grid-cols-3 border-b w-full text-sm"},[e._l(Object.keys(e.project),(function(t){return[o("div",{staticClass:"p-1 border-t border-r border-l capitalize"},[e._v(" "+e._s(t.replaceAll("/","/"))+" ")]),o("div",{staticClass:"p-1 border-t border-r col-span-2"},["fonts"!=t?o("span",[e._v(e._s(e.project[t]))]):e._e(),"fonts"===t&&e.fonts?o("span",{domProps:{innerHTML:e._s(e.fonts.join(", "))}}):e._e()])]})),o("div",{staticClass:"p-1 border-t border-r border-l"},[e._v("Images used as local asset")]),o("div",{staticClass:"p-1 border-t border-r col-span-2"},[e.project.uploads?o("whoobe-used-images",{on:{images:e.setImages}}):e._e(),e.uploads?o("span",[e._v(e._s(e.uploads.length))]):e._e()],1),e._m(1)],2),e.enabled?o("div",{staticClass:"p-2 text-center"},[o("button",{staticClass:"success rounded py-2 text-xl mx-auto",on:{click:e.generate}},[e._v("Generate")])]):e._e(),e.enabled?e._e():o("h3",[e._v("This option is available only in local development")]),e.output?o("div",{staticClass:"grid grid-cols-3 gap-10"},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:e.output,expression:"output"}],staticClass:"text-sm w-full h-64 bg-black text-green-500 font-light col-span-2",staticStyle:{"font-family":"monospace"},attrs:{id:"generated"},domProps:{value:e.output},on:{input:function(t){t.target.composing||(e.output=t.target.value)}}}),o("textarea",{directives:[{name:"model",rawName:"v-model",value:e.errors,expression:"errors"}],staticClass:"text-base w-full h-64 bg-black text-red-400",staticStyle:{"font-family":"monospace"},attrs:{id:"generated_errors"},domProps:{value:e.errors},on:{input:function(t){t.target.composing||(e.errors=t.target.value)}}})]):e._e()])},s=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"theme-dark p-1"},[o("h3",[e._v("Generate website")])])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"p-1 col-span-3 border-t border-r border-l"},[o("blockquote",[e._v("The system finds automatically which fonts and images (local) are used by your pages and will configure the relative generation process.")])])}],n=(o("a15b"),o("b0c0"),o("dfac")),r={name:"WhoobeGenerator",components:{WhoobeUsedImages:n["default"]},data:function(){return{output:"",errors:"",uploads:null,fonts:null}},computed:{cmsurl:function(){return window.localStorage.getItem("whoobe-cms")},project:function(){return JSON.parse(window.localStorage.getItem("whoobe-workspace"))},enabled:function(){return"undefined"===typeof webpackHotUpdate&&this.$store.dispatch("message","This option is available only in development mode"),"undefined"!=typeof webpackHotUpdate}},mounted:function(){var e=this;this.$api.service("generate").on("created",(function(t){t.data&&(e.output+=t.data.normalize()),t.error&&(e.errors+=t.error.normalize()),document.getElementById("generated").scrollTop=document.getElementById("generated").scrollHeight,document.getElementById("generated_errors").scrollTop=document.getElementById("generated_errors").scrollHeight}))},methods:{setImages:function(e,t){this.uploads=e,this.fonts=t,this.fonts.push("Barlow Condensed")},generate:function(){var e=this,t=this.project;t.fonts=this.fonts.join("|"),this.output="Starting generation ...",this.errors="",this.$api.service("whoobe/build").create({project:t.name,uploads:this.uploads,fonts:this.fonts}).then((function(t){e.output+=t.data}))}}},i=r,l=o("2877"),c=Object(l["a"])(i,a,s,!1,null,null,null);t["default"]=c.exports},dfac:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div")},s=[],n=o("2909"),r=(o("7db0"),o("159b"),o("caad"),o("2532"),o("ac1f"),o("5319"),o("4de4"),o("d3b7"),o("6062"),o("3ca3"),o("ddb0"),o("52cd")),i=o.n(r),l={name:"WhoobeUsedImages",data:function(){return{images:[]}},mounted:function(){var e=this;this.$api.service("articles").find({query:{$limit:100,$skip:0}}).then((function(t){console.log(t);var o=[];t.data.forEach((function(t){console.log(t);var a=t.blocks.json,s=i.a.query(a,'$..blocks[?(@.style.includes("font-family"))]');s.forEach((function(e){e.style.includes("font-family")&&o.push(e.style.replace("font-family:","").replaceAll('"',""))}));var n=i.a.query(a,"$..blocks..image.url");n.forEach((function(t){return t.includes("http")?null:e.images.push(t)}))})),e.$api.service("products").find({query:{$limit:200}}).then((function(e){var t=e.data.filter((function(e){return e.assets}));console.log(t)})),e.$emit("images",Object(n["a"])(new Set(e.images)),Object(n["a"])(new Set(o)))}))}},c=l,d=o("2877"),u=Object(d["a"])(c,a,s,!1,null,null,null);t["default"]=u.exports}}]);