(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d20faa7"],{b531:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{data:e.printNow}})},a=[],o=n("1da1"),i=(n("96cf"),n("ac1f"),n("5319"),n("b0c0"),n("d3b7"),{data:function(){return{printed:!1}},props:["print"],computed:{printNow:function(){this.saveprint()},devMode:function(){return!0}},methods:{save:function(e){e&&(this.$mapState().editor.component.image_uri=e.replace(".jpg",".webp"),this.$mapState().editor.component.image=e.replace(".jpg",".webp")),this.$action("savecomponent"),this.$emit("printed")},saveprint:function(){this.devMode?(this.$loading(!0),this.printMe()):this.$message("This option is available only in development mode")},printMe:function(){var e=arguments,t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.length>0&&void 0!==e[0]?e[0]:"content",t.devMode){n.next=4;break}return t.$message("This option is available only in development mode"),n.abrupt("return");case 4:return a=document.querySelector("#"+r),a||document.querySelector(r),o={type:"dataURL",useCORS:!0,scale:.5},n.next=9,t.$html2canvas(a,o);case 9:i=n.sent,t.srcToFile(i,"preview_"+t.$mapState().editor.component.name.replaceAll(" ","_")+".jpg","image/jpg").then((function(e){var n=new FormData;n.append("file",e),n.append("folder","preview"),n.append("thumbs",0),n.append("url","/uploads/preview/preview_"+t.$mapState().editor.component.name.replaceAll(" ","_")+".jpg"),t.$http.post("upload/file",n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return console.log(e),i=e.data.url,t.save(i),t.$loading(),i})).catch((function(e){t.$loading(),t.$message("An error occured. Check your console log")}))}));case 11:case"end":return n.stop()}}),n)})))()},srcToFile:function(e,t,n){return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.abrupt("return",fetch(e).then((function(e){return e.arrayBuffer()})).then((function(e){return new File([e],t,{type:n})})));case 1:case"end":return r.stop()}}),r)})))()}}}),p=i,c=n("2877"),u=Object(c["a"])(p,r,a,!1,null,null,null);t["default"]=u.exports}}]);