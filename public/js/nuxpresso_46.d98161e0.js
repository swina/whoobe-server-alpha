(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["nuxpresso_46","nuxpresso_50","chunk-2d0aa59a"],{1148:function(t,e,i){"use strict";var n=i("a691"),s=i("1d80");t.exports=function(t){var e=String(s(this)),i="",r=n(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(i+=e);return i}},"30fa":function(t,e,i){"use strict";i.r(e);var n={products:"            items {                id                 name                 description                 facetValues {                     code                     name                 }                 variants {                     name                     price                    currencyCode                }                assets {                     name                     source                 }             }",collections:"query Collections { collections ( options:{ sort :{ id : ASC } }) { items { name parent { name } children { name id productVariants { items { id name assets { name source } price } } } }}}",collection:"query Collections { collections(options :{ filter :{ name : { contains : __filter__ }}}) {items {name productVariants { totalItems items { product { id name assets { name source } description id variants { name price currencyCode } facetValues { name code } }}}}}}"};e["default"]=n},"408a":function(t,e,i){var n=i("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=n(t))throw TypeError("Incorrect invocation");return+t}},"4ec9":function(t,e,i){"use strict";var n=i("6d61"),s=i("6566");t.exports=n("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),s)},b680:function(t,e,i){"use strict";var n=i("23e7"),s=i("a691"),r=i("408a"),c=i("1148"),o=i("d039"),a=1..toFixed,l=Math.floor,u=function(t,e,i){return 0===e?i:e%2===1?u(t,e-1,i*t):u(t*t,e/2,i)},d=function(t){var e=0,i=t;while(i>=4096)e+=12,i/=4096;while(i>=2)e+=1,i/=2;return e},p=function(t,e,i){var n=-1,s=i;while(++n<6)s+=e*t[n],t[n]=s%1e7,s=l(s/1e7)},f=function(t,e){var i=6,n=0;while(--i>=0)n+=t[i],t[i]=l(n/e),n=n%e*1e7},h=function(t){var e=6,i="";while(--e>=0)if(""!==i||0===e||0!==t[e]){var n=String(t[e]);i=""===i?n:i+c.call("0",7-n.length)+n}return i},m=a&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!o((function(){a.call({})}));n({target:"Number",proto:!0,forced:m},{toFixed:function(t){var e,i,n,o,a=r(this),l=s(t),m=[0,0,0,0,0,0],v="",g="0";if(l<0||l>20)throw RangeError("Incorrect fraction digits");if(a!=a)return"NaN";if(a<=-1e21||a>=1e21)return String(a);if(a<0&&(v="-",a=-a),a>1e-21)if(e=d(a*u(2,69,1))-69,i=e<0?a*u(2,-e,1):a/u(2,e,1),i*=4503599627370496,e=52-e,e>0){p(m,0,i),n=l;while(n>=7)p(m,1e7,0),n-=7;p(m,u(10,n,1),0),n=e-1;while(n>=23)f(m,1<<23),n-=23;f(m,1<<n),p(m,1,1),f(m,2),g=h(m)}else p(m,0,i),p(m,1<<-e,0),g=h(m)+c.call("0",l);return l>0?(o=g.length,g=v+(o<=l?"0."+c.call("0",l-o)+g:g.slice(0,o-l)+"."+g.slice(o-l))):g=v+g,g}})},edca:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.products?i("div",{staticClass:"relative"},[t.$attrs.editor?i("icon",{staticClass:"z-highest absolute top-0 right-0 text-2xl text-gray-400 cursor-pointer m-2 -mt-3",attrs:{name:t.current?"collections":"web",title:t.current?"Loop view":"Single View"},on:{click:function(e){t.current?t.current=null:t.setProduct(t.products[0],0)}}}):t._e(),i("collections",{attrs:{reload:t.reload},on:{collection:t.collectionQry}}),i("h3",[t._v(t._s(t.collection))]),t.current?t._e():i("div",{staticClass:"flex flex-col md:grid md:grid-cols-2 gap-2 md:gap-5 lg:gap-10",class:"lg:grid-cols-"+t.settings.loop.cols},[t._l(t.products,(function(e,n){return[i("div",{staticClass:"flex flex-col relative",class:t.loopCss,on:{click:function(i){return t.setProduct(e,n)}}},[t._l(t.settings.loop.fields,(function(n){return["assets"!=n.field&&"price"!=n.field?i("div",{class:n.css},[t._v(t._s(e[n.field]))]):t._e(),"assets"===n.field?i("img",{class:n.css,attrs:{src:e.assets[0].source}}):t._e(),"price"===n.field?i("div",{class:n.css},[t._v(t._s((e.variants[0].price/100).toFixed(2)))]):t._e()]}))],2)]}))],2),t.current?t._e():i("navigation",{staticClass:"my-8",attrs:{size:"4xl"},on:{prev:function(e){t.skip>0&&(t.skip=parseInt(t.skip)-parseInt(t.limit))},next:function(e){t.skip=parseInt(t.skip)+parseInt(t.limit)}}}),t.current?i("div",{key:t.current.id,staticClass:"relative flex flex-col p-2 w-full md:w-11/12 lg:w-5/6 m-auto transition-all duration-500 ease-in-out",class:t.loopCss},[i("icon",{staticClass:"absolute right-0 top-0 m-2 text-3xl hover:bg-black hover:text-white",attrs:{name:"close"},on:{click:function(e){t.current=null}}}),i("div",{staticClass:"flex flex-col gap-5 md:grid",class:"grid-cols-"+t.settings.single.layout_cols},[t._l(t.settings.single.layout_cols,(function(e){return[i("div",{staticClass:"flex flex-col"},[t._l(t.settings.single.fields,(function(n){return[parseInt(n.col)===e-1?i("div",["assets"===n.field?i("img",{class:n.css,attrs:{src:t.current.assets[0].source}}):t._e(),"variants"!=n.field&&"assets"!=n.field&&"price"!=n.field&&"add_to_cart"!=n.field?i("div",{class:n.css},[t._v(t._s(t.current[n.field]))]):t._e(),"price"===n.field?i("div",{class:n.css,domProps:{innerHTML:t._s(t.price(t.current,t.currentPrice))}}):t._e(),"variants"===n.field&&t.current.variants.length>1?i("div",{staticClass:"flex flex-col md:flex-row",class:n.css},[t._l(t.current.variants,(function(e){return[i("div",{staticClass:"border p-2 w-48 text-base mr-2 cursor-pointer transition-all duration-500 ease-in-out",class:t.currentPrice===e?"bg-black text-white":"",on:{click:function(i){t.currentPrice=e}}},[t._v(t._s(e.name))])]}))],2):t._e(),"add_to_cart"===n.field?i("button",{staticClass:"snipcart-add-item text-xl my-4 p-2",attrs:{"data-item-id":t.current.id,"data-item-name":t.currentPrice.name,"data-item-price":t.itemprice(t.current,t.currentPrice),"data-item-url":"/store/products/"+t.current.id,"data-item-image":t.current.assets[0].source,"data-item-description":t.current.description}},[t._v("Buy")]):t._e()]):t._e()]}))],2)]}))],2),i("navigation",{staticClass:"m-auto mt-10",attrs:{size:"4xl"},on:{prev:function(e){t.index>0&&t.index--},next:function(e){t.index++}}})],1):t._e()],1):t._e()},s=[],r=i("2909"),c=(i("d3b7"),i("3ca3"),i("ddb0"),i("ac1f"),i("5319"),i("4ec9"),i("d81d"),i("159b"),i("caad"),i("2532"),i("b0c0"),i("b680"),i("30fa")),o=i("52cd"),a=i.n(o),l={name:"VendureMain",components:{collections:function(){return i.e("chunk-2d0e17a0").then(i.bind(null,"7b32"))}},data:function(){return{collection:null,products:null,current:null,currentPrice:null,descVisible:!1,index:0,skip:0,gql:"",settings:null,reload:!1}},computed:{limit:function(){return parseInt(this.settings.general.limit)},loopCss:function(){return this.$attrs.plugin.component.settings.loop.box_css}},watch:{skip:function(t){this.qry()},index:function(t){this.setProduct(this.products[t],t)}},methods:{qry:function(){var t=this;this.$loading(!0);var e="query Products { products ( options : { skip: "+parseInt(this.skip)+" take: "+this.limit+"}) {"+this.gql+"}}";console.log(e),fetch("http://localhost:3000/shop-api",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e})}).then((function(t){return t.json()})).then((function(e){console.log(e.data.products.items),t.products=e.data.products.items,t.$loading()}))},collectionQry:function(t){var e=this;this.current=null,this.reload=!0,this.collection=t;var i=c["default"].collection;i=i.replace("__filter__",'"'+t+'"'),console.log(i),this.$loading(!0),fetch("http://localhost:3000/shop-api",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:i})}).then((function(t){return t.json()})).then((function(t){var i=a.a.query(t.data.collections.items[0],"$..product");e.products=Object(r["a"])(new Map(i.map((function(t){return[t["id"],t]}))).values()),e.$loading(),e.reload=!1}))},setProduct:function(t,e){this.index=e,this.current=t,this.currentPrice=t.variants[0]},price:function(t,e){var i={value:1,label:""};return t.facetValues.forEach((function(t){t.code.includes("20-off")&&(i={value:.8,label:t.name})})),e?"<small>"+e.currencyCode+"</small> "+(e.price/100*i.value).toFixed(2):"<small>"+t.variants[0].currencyCode+"</small> "+(t.variants[0].price/100*i.value).toFixed(2)+'<div class="absolute top-0 right-0 text-xs bg-red-500 text-white">'+i.label+"</div>"},itemprice:function(t,e){var i={value:1,label:""};return t.facetValues.forEach((function(t){t.code.includes("20-off")&&(i={value:.8,label:t.name})})),e?(e.price/100*i.value).toFixed(2):(t.variants[0].price/100*i.value).toFixed(2)}},mounted:function(){var t=this;fetch("http://localhost:3000/shop-api",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"query Products { products { totalItems } }"})}).then((function(t){return t.json()})).then((function(e){t.total=e.data.products.totalItems})),this.settings=Object.assign({},this.$attrs.plugin.component.settings),this.gql=c["default"].products,this.qry()}},u=l,d=i("2877"),p=Object(d["a"])(u,n,s,!1,null,null,null);e["default"]=p.exports}}]);