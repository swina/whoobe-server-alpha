(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ab114"],{1461:function(t,e,i){"use strict";i.r(e);var l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.articles&&t.cols?i("div",{staticClass:"m-2"},[t.selected?t._e():i("div",{staticClass:"theme-dark"},[i("button",{on:{click:function(e){return t.$action("articles_create")}}},[t._v("Create new")]),i("span",{staticClass:"ml-2"},[t._v("Category")]),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.filter,expression:"filter"}],staticClass:"theme-dark w-32",on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.filter=e.target.multiple?i:i[0]}}},[i("option",{attrs:{value:""}},[t._v("all")]),t._l(t.$mapState().datastore.dataset.setup[0].categories.articles,(function(e){return i("option",{domProps:{value:e}},[t._v(t._s(e))])}))],2)]),t.selected?t._e():i("div",{staticClass:"bg-gray-200 text-sm"},[i("div",{staticClass:"theme-dark bg-black grid",class:"grid-cols-"+(t.cols.length+1)},t._l(t.cols,(function(e,l){return"_id"!=e.title?i("div",{key:l,staticClass:"p-1 capitalize font-bold",class:"title"===e.title?"col-span-2":""},[t._v(t._s(e.title))]):t._e()})),0),t._l(t.articles,(function(e){return i("div",{staticClass:"hover:bg-gray-300 cursor-pointer w-full p-1 flex flex-row border-b",on:{click:function(i){return t.loadSingleArticle(e._id)}}},[i("div",{staticClass:"w-full grid",class:"grid-cols-"+(t.cols.length+1)},[t._l(t.cols,(function(l){return"_id"!=l.title?i("div",{class:"title"===l.title?"col-span-2":""},["string"===l.type?i("span",{class:"title"===l.title?"font-bold":""},[t._v(" "+t._s(e[l.title])+" ")]):t._e(),"boolean"===l.type?i("icon",{staticClass:"mx-5",class:e[l.title]?"text-green-400 font-bold":"text-red-600",attrs:{name:e[l.title]?"checked":"close"}}):t._e(),"image"===l.type&&e[l.title]?i("img",{staticClass:"w-24 h-16 object-top object-cover",attrs:{src:t.imageURL(e[l.title])}}):t._e(),"date"===l.type?i("span",[t._v(" "+t._s(e[l.title].split("T")[0])+" ")]):t._e()],1):t._e()})),i("div",[i("button",{on:{click:function(i){return t.deleteArticle(e._id)}}},[t._v("Delete")])])],2)])}))],2),t.selected?t._e():i("div",{staticClass:"w-full theme-dark grid grid-cols-3 p-1"},[i("div",{staticClass:"text-xs"},[t._v(" "+t._s(t.skip+1)+"-"+t._s(t.skip+t.limit>t.total?t.total:t.skip+t.limit)+" of "+t._s(t.total)+" ")]),i("navigation",{attrs:{size:"4xl"},on:{prev:function(e){t.skip>0&&(t.skip=t.skip-t.limit)},next:function(e){t.total-(t.skip+t.limit)>0&&(t.skip=t.skip+t.limit)}}}),i("div")],1),t.selected?i("article-edit",{attrs:{article:t.selected},on:{close:function(e){t.selected=null}}}):t._e()],1):t._e()},s=[],a=(i("d3b7"),i("3ca3"),i("ddb0"),i("caad"),i("2532"),i("d81d"),i("4de4"),i("7db0"),i("b64b"),{name:"Articles",components:{"article-edit":function(){return i.e("chunk-5e5cbecf").then(i.bind(null,"4384"))}},data:function(){return{cols:[],filter:"",articles:null,skip:0,limit:10,total:0,sortby:{updatedAt:-1},newArticle:null,selected:null}},watch:{skip:function(t){this.loadArticles()},filter:function(t){this.loadArticles()}},methods:{imageURL:function(t){if(!t)return"";var e=window.localStorage.getItem("whoobe-cms");return t.includes("http")?t:e+t.substring(1)},loadArticles:function(){var t=this,e=this.cols.map((function(t){return t.title}));console.log(e);var i={$limit:this.limit,$skip:this.skip,$select:e,$sort:this.sortby};this.filter&&(i.categories=this.filter),this.$api.service("articles").find({query:i}).then((function(e){t.total=e.total,t.articles=e.data}))},loadSingleArticle:function(t){var e=this;this.$api.service("articles").get(t).then((function(t){e.selected=t}))},deleteArticle:function(t){var e=this;this.$api.service("articles").remove(t).then((function(t){e.loadArticles()}))}},mounted:function(){var t=this,e=this.$mapState().datastore.schema.articles,i={};Object.keys(e).map((function(t){var l=e[t].type;"string"===l?i[t]="":"object"===l?i[t]={}:"null"===l?i[t]=null:"boolean"===l?i[t]=!1:"array"===l?i[t]=[]:"image"===l&&(i[t]="")})),this.schema=e,delete i._id,delete i.createdAt,delete i.updatedAt,this.newArticle=i,Object.keys(e).map((function(i){e[i].list&&t.cols.push(e[i])})),this.loadArticles()}}),c=a,n=i("2877"),r=Object(n["a"])(c,l,s,!1,null,null,null);e["default"]=r.exports}}]);