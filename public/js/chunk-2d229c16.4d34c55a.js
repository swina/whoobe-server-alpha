(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d229c16"],{df97:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex flex-col theme-dark"},[a("div",{staticClass:"flex flex-row my-1 p-1"},[a("span",[t._v("Category")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filter,expression:"filter"}],staticClass:"ml-2 w-full theme-dark",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.filter=e.target.multiple?a:a[0]}}},t._l(t.$mapState().datastore.dataset.setup[0].categories.components,(function(e){return a("option",{domProps:{value:e}},[t._v(t._s(e))])})),0)]),t.loadTemplates?a("div",{staticClass:"flex flex-row flex-wrap justify-around p-4"},[t._l(t.templates,(function(e,i){return[i>=t.start&&i<t.start+t.limit?a("div",{staticClass:"w-48 flex flex-col mb-4 cursor-pointer",attrs:{title:e.category},on:{click:function(a){return t.setTemplate(e)}}},[a("div",{staticClass:"flex flex-row items-center justify-between text-gray-600"},[a("span",{staticClass:"text-xs"},[t._v(t._s(e.name))]),a("i",{staticClass:"material-icons ml-1"},[t._v(t._s("page"===e.category?"web":"dynamic_feed"))])]),a("div",{staticClass:"h-24 bg-auto bg-no-repeat bg-cover border shadow rounded",style:"background-image:url("+t.background(e)+")"})]):t._e()]}))],2):t._e(),a("div",{staticClass:"flex flex-row justify-around text-center"},[a("i",{staticClass:"material-icons mx-2 text-2xl",on:{click:t.prev}},[t._v("chevron_left")]),a("i",{staticClass:"material-icons mx-2 text-2xl",on:{click:t.next}},[t._v("chevron_right")])])])},s=[],l=(a("7db0"),a("4de4"),a("caad"),a("2532"),a("159b"),{name:"BlockSelection",data:function(){return{start:0,limit:12,templates:null,filter:"page"}},props:["article"],computed:{loadTemplates:function(){var t=this;return this.$api.service("components").find({query:{category:this.filter,$skip:0,$limit:200}}).then((function(e){t.templates=e.data})),!0}},methods:{background:function(t){return this.$imageURL(t.image)?this.$imageURL(t.image):a("bd21")},next:function(){this.start<this.templates.length-this.limit&&(this.start+=this.limit)},prev:function(){this.start>0&&(this.start-=this.limit)},setTemplate:function(t){var e=this;this.$api.service("components").get(t._id).then((function(t){console.log(t),delete t.autosave,e.article.blocks=t,e.article.component=t._id,e.article.template_id=t._id,e.article.template_preview=t.image,e.$api.service("articles").find().then((function(a){var i=0;a.data.forEach((function(a,s){a.template_id===t._id&&(a.template_preview=t.image,a.blocks=t,console.log(a),e.$api.service("articles").patch(a._id,a).then((function(t){console.log("updated template for ",t)})),i++)})),e.$message("Updated "+i+" articles")}))}))}}}),n=l,r=a("2877"),o=Object(r["a"])(n,i,s,!1,null,null,null);e["default"]=o.exports}}]);