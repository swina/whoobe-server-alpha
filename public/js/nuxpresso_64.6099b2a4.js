(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["nuxpresso_64","nuxpresso_74"],{"3b1b":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.$attrs.category?a("ul",[e._l(Object.keys(e.$attrs.category),(function(t){return[a("li",{staticClass:"list-none"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.selected[e.$attrs.name+"|"+t],expression:"selected[$attrs.name+'|'+category]"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.selected[e.$attrs.name+"|"+t])?e._i(e.selected[e.$attrs.name+"|"+t],null)>-1:e.selected[e.$attrs.name+"|"+t]},on:{change:function(a){var s=e.selected[e.$attrs.name+"|"+t],c=a.target,r=!!c.checked;if(Array.isArray(s)){var n=null,i=e._i(s,n);c.checked?i<0&&e.$set(e.selected,e.$attrs.name+"|"+t,s.concat([n])):i>-1&&e.$set(e.selected,e.$attrs.name+"|"+t,s.slice(0,i).concat(s.slice(i+1)))}else e.$set(e.selected,e.$attrs.name+"|"+t,r)}}}),e._v(" "+e._s(t))]),a("ul",[e._l(e.$attrs.category[t],(function(s){return[a("li",{staticClass:"list-none"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.selected[e.$attrs.name+"|"+t+"|"+s],expression:"selected[$attrs.name+'|'+category+'|'+name]"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.selected[e.$attrs.name+"|"+t+"|"+s])?e._i(e.selected[e.$attrs.name+"|"+t+"|"+s],null)>-1:e.selected[e.$attrs.name+"|"+t+"|"+s]},on:{change:function(a){var c=e.selected[e.$attrs.name+"|"+t+"|"+s],r=a.target,n=!!r.checked;if(Array.isArray(c)){var i=null,l=e._i(c,i);r.checked?l<0&&e.$set(e.selected,e.$attrs.name+"|"+t+"|"+s,c.concat([i])):l>-1&&e.$set(e.selected,e.$attrs.name+"|"+t+"|"+s,c.slice(0,l).concat(c.slice(l+1)))}else e.$set(e.selected,e.$attrs.name+"|"+t+"|"+s,n)}}}),e._v(" "+e._s(s))])]}))],2)]}))],2):e._e()},c=[],r={name:"NestedObject",data:function(){return{categories:{}}},computed:{selected:function(){return this.$mapState().datastore.selectedCategories}}},n=r,i=a("2877"),l=Object(i["a"])(n,s,c,!1,null,null,null);t["default"]=l.exports},"8d28":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.categories?a("div",{staticClass:"m-2"},[a("h4",[e._v("Categories")]),a("div",{staticClass:"flex flex-row flex-wrap p-2 bg-gray-200 text-black border",attrs:{title:"click to add a new category"}},[e._l(e.categories,(function(t){return[a("div",{staticClass:"flex flex-row items-center mr-2 bg-purple-500 text-white rounded my-2 text-lg px-2 py-1",attrs:{title:"click to manage facets"}},[e._v(e._s(t.name)+" "),a("icon",{staticClass:"ml-2",attrs:{name:"edit"},on:{click:function(a){e.selected=t,e.getFacets(t._id)}}}),e._v(" "),a("icon",{staticClass:"ml-2",attrs:{name:"close"}})],1)]})),a("input",{directives:[{name:"model",rawName:"v-model",value:e.newCategory,expression:"newCategory"}],staticClass:"new_category text-lg bg-gray-200",attrs:{type:"text",placeholder:""},domProps:{value:e.newCategory},on:{keydown:function(t){return e.addCategory(t)},input:function(t){t.target.composing||(e.newCategory=t.target.value)}}})],2),e.selected?a("div",{staticClass:"bg-purple-500 text-white text-lg p-2"},[e._v(e._s(e.selected.name)+" Facets")]):e._e(),e.facets?a("div",{staticClass:"flex flex-row flex-wrap p-2 bg-gray-200 text-black border",attrs:{title:"click to add a new facet"}},[e._l(e.facets,(function(t){return[a("div",{staticClass:"flex flex-row items-center mr-2 bg-teal-500 text-white rounded my-2 text-lg px-2 py-1",attrs:{title:"click to manage facets"}},[e._v(e._s(t.name)+" "),a("icon",{staticClass:"ml-2",attrs:{name:"close"}})],1)]})),a("input",{directives:[{name:"model",rawName:"v-model",value:e.newFacet,expression:"newFacet"}],staticClass:"new_facet text-lg bg-gray-200",attrs:{type:"text",title:"Enter to save",placeholder:"click to add"},domProps:{value:e.newFacet},on:{keydown:function(t){return e.addFacet(t)},input:function(t){t.target.composing||(e.newFacet=t.target.value)}}})],2):e._e(),a("div",{staticClass:"p-4 m-10 mt-24 m-auto bg-gray-100 text-black text-center text-2xl"},[e._v(" Removal of categories/facets can affect the product search and display. Before to remove checkout your products settings. ")])]):e._e()},c=[],r=a("2909"),n=(a("4de4"),a("b64b"),a("ac1f"),a("1276"),a("a15b"),a("d81d"),a("d3b7"),a("6062"),a("3ca3"),a("ddb0"),a("7db0"),a("159b"),a("caad"),a("2532"),a("3b1b")),i=a("52cd"),l=a.n(i),o={name:"WhoobeProductsCategories",components:{NestedCategory:n["default"]},data:function(){return{categories:null,facets:null,selected:null,newCategory:"",newFacet:""}},computed:{},methods:{setCategory:function(){var e=this,t=Object.keys(this.selected).filter((function(t){return e.selected[t]}));console.log(t),t=t.map((function(e){return e.split("|")})).join(",").split(",");var a=Object(r["a"])(new Set(t));console.log(a)},getFacets:function(e){var t=this;this.$api.service("categories").find({query:{collection:e}}).then((function(e){t.facets=e.data}))},addCategory:function(e){var t=this;if(13===e.keyCode&&e.target.value){var a={name:e.target.value,slug:this.$slugify(e.target.value),type:"product",active:!0};this.$api.service("categories").create(a).then((function(a){t.categories.push(a),t.newCategory="",e.target.value=""}))}},addFacet:function(e){var t=this;if(13===e.keyCode&&e.target.value){var a={name:e.target.value,type:"facet",slug:this.$slugify(e.target.value),collection:this.selected._id};this.$api.service("categories").create(a).then((function(e){t.facets.push(e),t.newFacet=""}))}},rebuildCategories:function(){var e=this;this.$api.service("products").find({query:{$limit:200}}).then((function(t){var a=l.a.query(t.data,"$..facets"),s=[],c="";a.forEach((function(e){var t=e.split("|");t.forEach((function(e){console.log(e),!e.includes(":")&&(c+=e+",")}))})),s.push(c);var n=s[0].split(","),i=Object(r["a"])(new Set(n));i.forEach((function(t){if(t){var a={name:t,type:"product",slug:e.$slugify(t),active:!0};e.$api.service("categories").create(a).then((function(e){console.log(e)}))}}))}))}},mounted:function(){var e=this;this.$api.service("categories").find({query:{$limit:50,type:"product",$sort:{name:1}}}).then((function(t){e.categories=t.data}))}},d=o,u=a("2877"),g=Object(u["a"])(d,s,c,!1,null,null,null);t["default"]=g.exports}}]);